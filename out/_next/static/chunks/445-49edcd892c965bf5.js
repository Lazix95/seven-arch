(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[445],{1508:function(e,n,t){"use strict";t.d(n,{x:function(){return z}});var l=t(5893),i=t(6093),a=t(4534),r=t(7294),s=t(7091),c=t(6768),u=t(4351);function o(e){var n;let{label:t,value:i,onChange:a,options:r,nonClearable:s=!0,...o}=e;return(0,l.jsx)(c.Z,{size:"small",value:null!==(n=null==r?void 0:r.find(e=>e.value===i))&&void 0!==n?n:null,fullWidth:!0,disablePortal:!0,clearIcon:s?null:void 0,options:r||[],onChange:(e,n)=>a(n),...o,renderInput:e=>(0,l.jsx)(u.Z,{...e,label:t})})}var d=t(6886);function x(e){let{children:n,centerX:t=!0,centerY:i,column:a,spacing:r=3,mt:s=0,mb:c=3,...u}=e,o={...t&&{justifyContent:"center",margin:"auto"},...i&&{alignItems:"center"},...a&&{direction:"column"}};return(0,l.jsx)(d.ZP,{container:!0,spacing:r,mt:s,mb:c,...u,...o,children:n})}var h=t(1362),f=t(9610),v=t(5922),g=t(9225),m=t(657),j=t(1425),p=t(6514),y=t(7645),A=t(3830),b=t(1519),w=t(971),C=t.n(w);let S={actions:"actions",content:"content"};function I(e){let{open:n,title:t,children:i,onClose:a}=e,r=(0,A.F)(i,S.content),s=(0,A.F)(i,S.actions);return(0,l.jsxs)(m.Z,{className:C().dialogAllowOverflow,open:n,onClose:a,maxWidth:"xs",sx:{overflow:"visible"},componentsProps:{},fullWidth:!0,children:[(0,l.jsx)(y.Z,{children:t}),(0,l.jsx)(b.Z,{}),(0,l.jsx)(p.Z,{children:r}),(0,l.jsx)(b.Z,{}),(0,l.jsx)(j.Z,{className:"u-pa--3",children:s})]})}var Z=t(6656),_=t(5861),T=t(7632),k=t(413),D=t(2056),P=t(6540),R=t(9869),N=t(8364);let E=[{label:"None",value:null},{label:"News Teller",value:"newsTeller"},{label:"Description",value:"description"}],L=[{label:"Small",value:"small"},{label:"Large",value:"large"}];function z(e){var n;let{isMainArticle:t,article:c,onSubmitMainArticle:u}=e,[d,m]=(0,r.useState)(!1),[j,p]=(0,r.useState)(!1),[y,A]=(0,r.useState)(!1),[w,C]=(0,r.useState)(null),[z,F]=(0,r.useState)(""),[U,M]=(0,r.useState)(""),[O,W]=(0,r.useState)(""),[Y,q]=(0,r.useState)(),[B,J]=(0,r.useState)("large"),[K,X]=(0,r.useState)([]),[H,V]=(0,r.useState)(null),G=(0,r.useCallback)(()=>{if(c){var e,n,t,l,i,a,r,s;A(c.state),C(null!==(t=null===(e=c.feature)||void 0===e?void 0:e.type)&&void 0!==t?t:null),F(null!==(l=c.title)&&void 0!==l?l:""),M(null!==(i=c.content)&&void 0!==i?i:""),W(null!==(a=null===(n=c.feature)||void 0===n?void 0:n.content)&&void 0!==a?a:""),J(null!==(r=c.size)&&void 0!==r?r:"large"),X((0,D.T)(null!==(s=c.subArticles)&&void 0!==s?s:[]))}},[c]);function Q(e,n){V(t=>({...t,[e]:n}))}return(0,r.useEffect)(()=>{G()},[c,G]),(0,l.jsx)(i.q,{label:"Home page Article Settings",children:(0,l.jsxs)(x,{centerX:!1,spacing:2,children:[(0,l.jsx)(a.L,{label:"State:",value:y,onChange:A}),(0,l.jsx)(h.z,{className:"u-pt--2",xs:12,children:(0,l.jsx)(b.Z,{})}),(0,l.jsx)(h.z,{xs:12,children:(0,l.jsx)(g.g,{disabled:!y,fullWidth:!0,onClick:()=>m(!0),children:"Manage Article"})}),(0,l.jsxs)(I,{open:d&&!j,title:"Manage Article",onClose:()=>m(!1),children:[(0,l.jsxs)(Z.g,{name:S.content,children:[(0,l.jsxs)(s.A,{If:y,children:[(0,l.jsx)(s.A,{If:t,children:(0,l.jsx)(o,{className:"u-mb--5",label:"Article Feature",value:w,options:E,onChange:e=>C(null==e?void 0:e.value)})}),(0,l.jsx)(s.A,{If:t,children:(0,l.jsx)(h.z,{xs:12,children:(0,l.jsx)(f.v,{label:"Title",value:z,onChange:e=>F(e.target.value)})})}),(0,l.jsx)(h.z,{xs:12,children:(0,l.jsx)(f.v,{label:"Content",value:U,onChange:e=>M(e.target.value)})}),(0,l.jsx)(s.A,{RIf:t,children:(0,l.jsx)(o,{className:"u-mb--5",label:"Size",value:B,options:L,onChange:e=>J(null==e?void 0:e.value)})})]}),(0,l.jsx)(s.A,{If:y&&t&&!!w,children:(0,l.jsx)(h.z,{xs:12,className:"",children:(0,l.jsx)(f.v,{multiline:!0,label:"Feature Content",value:O,onChange:e=>W(e.target.value)})})}),(0,l.jsxs)(s.A,{If:t,children:[(0,l.jsxs)("div",{className:"u-end--x u-flex--space-between u-mb--2",children:[(0,l.jsx)(_.Z,{className:"u-mr--5",children:"Sub Articles"}),(0,l.jsx)(g.g,{color:"primary",disabled:!y,onClick:function(){p(!0),V({id:(0,T.Z)(),content:"",link:"",state:!0,image:void 0})},children:(0,l.jsxs)("div",{className:"u-center--x",children:[(0,l.jsx)("span",{children:"Add"}),(0,l.jsx)(P.Z,{})]})})]}),(0,l.jsx)(b.Z,{}),(0,l.jsx)(s.A,{If:0===K.length,children:(0,l.jsx)("div",{className:"u-center--y u-pa--2",children:(0,l.jsx)(_.Z,{color:"gray",children:"No Sub Articles"})})}),(0,l.jsx)(s.A,{If:K.length>0,children:K.map(e=>(0,l.jsxs)("div",{className:"u-flex--space-between u-center--x",children:[(0,l.jsxs)("div",{className:"u-center--x u",children:[(0,l.jsx)(_.Z,{children:e.content}),(0,l.jsx)(s.A,{If:!e.state,children:(0,l.jsx)(_.Z,{style:{border:"1px solid",borderRadius:"5px",padding:"0 5px"},className:"u-text--gray u-text--font-10 u-ml--3",children:"DISABLED"})})]}),(0,l.jsxs)("div",{style:{width:"80px"},children:[(0,l.jsx)(g.g,{color:"error",btnType:"Icon",onClick:()=>{X(n=>(0,k.lB)(n,e,"id"))},children:(0,l.jsx)(N.Z,{})}),(0,l.jsx)(g.g,{btnType:"Icon",onClick:()=>{V({...e}),p(!0)},children:(0,l.jsx)(R.Z,{})})]})]},e.id))}),(0,l.jsx)(b.Z,{className:"u-mb--5"})]}),(0,l.jsx)(h.z,{xs:12,children:(0,l.jsx)(v.t,{label:"Article Image",previewUrl:null==c?void 0:null===(n=c.image)||void 0===n?void 0:n.url,onChange:(e,n)=>q(n)})})]}),(0,l.jsxs)(Z.g,{name:S.actions,children:[(0,l.jsx)(g.g,{onClick:function(){m(!1),G()},children:"Cancel"}),(0,l.jsx)(g.g,{onClick:function(){let e={type:"main",title:z,subArticles:K.map(e=>{let{imagePreviewUrl:n,oldFirebaseImage:t,...l}=e;return{...l,image:e.image||t}}),feature:w?{type:w,content:O}:null,size:B,...Y&&{image:Y},content:U,state:y};m(!1),null==u||u(e)},children:"Submit"})]})]}),(0,l.jsxs)(I,{open:j,title:"Manage Sub Article",onClose:()=>p(!1),children:[(0,l.jsxs)(Z.g,{name:S.content,children:[(0,l.jsx)(i.q,{label:"Turn On/Off",center:!1,noPadding:!0,className:"u-pb--5",children:(0,l.jsx)(a.L,{gridItemProps:{className:"u-pl--3"},label:"State:",value:null==H?void 0:H.state,onChange:e=>Q("state",e)})}),(0,l.jsx)(h.z,{xs:12,children:(0,l.jsx)(f.v,{label:"Content",value:null==H?void 0:H.content,onChange:e=>Q("content",e.target.value)})}),(0,l.jsx)(h.z,{xs:12,children:(0,l.jsx)(f.v,{label:"Link",value:null==H?void 0:H.link,onChange:e=>Q("link",e.target.value)})}),(0,l.jsx)(h.z,{xs:12,children:(0,l.jsx)(v.t,{label:"Article Image",previewUrl:null==H?void 0:H.imagePreviewUrl,onChange:(e,n)=>Q("image",n),onPreviewUrlChange:e=>Q("imagePreviewUrl",e)})})]}),(0,l.jsxs)(Z.g,{name:S.actions,children:[(0,l.jsx)(g.g,{onClick:function(){p(!1),V(null)},children:"Cancel"}),(0,l.jsx)(g.g,{onClick:function(){H&&(X(e=>(0,k.z8)(e,H,"id")),p(!1),V(null))},children:"Submit"})]})]})]})})}},1651:function(e,n,t){"use strict";t.d(n,{K4:function(){return c},WJ:function(){return r},Zt:function(){return a},Zx:function(){return s}});var l=t(9261),i=t(9658);async function a(){let e=await (0,l.uc)("articles");return{articles:e}}async function r(e){let n="article-".concat(e);return await (0,l.PP)("articles",n)}async function s(e){let{image:n,subArticles:t,...a}=e,r="article-".concat(e.entity),s=n?await (0,i.r3)({image:n,folder:"articles",name:r}):void 0;return await (0,l.yh)({entity:"articles",payload:{...a,image:s},id:r})}async function c(e){let n;let{image:t,subArticles:a,...r}=e,s=[];return a&&(s=await Promise.all(a.map(async e=>{var n,t;if(e.image&&e.image instanceof File){let t=null!==(n=await (0,i.r3)({image:e.image,folder:"articles",name:e.id}))&&void 0!==n?n:void 0;return{...e,image:t}}return{...e,image:null!==(t=e.image)&&void 0!==t?t:null}}))),t&&(n=await (0,i.r3)({image:t,folder:"articles",name:e.id})),await (0,l.wI)({entity:"articles",payload:{...r,...t&&{image:n},subArticles:s},id:e.id})}},4349:function(e,n,t){"use strict";t.d(n,{c:function(){return a}});var l=t(5893),i=t(5861);function a(e){let{level:n,text:t,children:a,color:r="text.primary",...s}=e;return(0,l.jsx)(i.Z,{variant:"h".concat(n),color:r,...s,children:a||t})}},5922:function(e,n,t){"use strict";t.d(n,{t:function(){return g}});var l=t(5893),i=t(7294),a=t(7258),r=t.n(a),s=t(6886),c=t(7091);let u=e=>new Promise((n,t)=>{let l=new FileReader;l.onloadend=()=>{n(l.result)},l.onerror=t,l.readAsDataURL(e)});function o(){return(0,l.jsx)("div",{style:{width:"100%"}})}var d=t(3321);function x(e){let{label:n="Upload",onChange:t}=e;async function i(e){var n;let l=null===(n=e.target.files)||void 0===n?void 0:n[0];if(l){let e=await u(l);return null==t?void 0:t(l,e)}}return(0,l.jsxs)(d.Z,{variant:"outlined",component:"label",children:[(0,l.jsx)("span",{children:n}),(0,l.jsx)("input",{onChange:i,type:"file",hidden:!0})]})}var h=t(6093),f=t(8364),v=t(9225);let g=e=>{let{onChange:n,previewUrl:t,name:a,label:d,noPreview:g,onPreviewUrlChange:m}=e,[j,p]=(0,i.useState)(null);(0,i.useEffect)(()=>{p(null!=t?t:null)},[t]);let y=async e=>{var t;e.preventDefault();let l=null===(t=e.dataTransfer)||void 0===t?void 0:t.files[0];null==n||n(null!=a?a:"",l),g||p(await u(l))};async function A(e,t){null==n||n(null!=a?a:"",e),g||(null==m||m(t),p(t))}return(0,l.jsx)(h.q,{style:{aspectRatio:"16/9",width:"100%",height:"100%",marginBottom:"20px"},centerText:!0,label:d,children:(0,l.jsx)("div",{className:r().dropzone,children:(0,l.jsx)("div",{onDrop:y,onDragOver:e=>{e.preventDefault()},onDragLeave:e=>{e.preventDefault()},style:{aspectRatio:"16/9",width:"100%",height:"100%"},children:(0,l.jsx)(s.ZP,{style:{height:"100%"},container:!0,alignContent:"center",children:(0,l.jsxs)(s.ZP,{style:{height:j?"100%":"auto"},item:!0,xs:12,children:[(0,l.jsxs)(c.A,{RIf:!!j,children:[(0,l.jsx)("img",{src:j,alt:"Uploaded",className:r().image}),(0,l.jsx)("div",{className:r().overlay,children:(0,l.jsx)(v.g,{onClick:()=>{p(null),null==m||m(null)},btnType:"Icon",children:(0,l.jsx)(f.Z,{style:{fontSize:"30px"}})})})]}),(0,l.jsxs)(c.A,{RIf:!j,children:[(0,l.jsx)("span",{children:"Drag and drop an image here"}),(0,l.jsx)(o,{}),(0,l.jsx)("span",{children:"or"}),(0,l.jsx)(o,{}),(0,l.jsx)(x,{onChange:A})]})]})})})})})}},5429:function(e,n,t){"use strict";t.d(n,{L:function(){return o}});var l=t(5893),i=t(7294),a=t(7690),r=t(7091),s=t(6886),c=t(8456);function u(){return(0,l.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flex:"auto",flexDirection:"column",justifyContent:"center"},children:(0,l.jsx)(s.ZP,{alignSelf:"center",item:!0,children:(0,l.jsx)(c.Z,{})})})}function o(e){let{children:n,validation:t=!0,grid:s=!0,isLoading:c,spacing:o=3,onSubmit:d}=e,x=(0,i.useRef)(null);return c?(0,l.jsx)(u,{}):(0,l.jsx)("form",{ref:x,onSubmit:function(e){e.preventDefault(),(!t||!x.current||x.current.checkValidity())&&(new FormData(e.currentTarget),null==d||d())},children:(0,l.jsx)(r.A,{RIf:s,Fallback:()=>(0,l.jsx)(l.Fragment,{children:n}),children:(0,l.jsx)(a.e,{style:{width:"100%"},centerX:!0,column:!0,spacing:o,mt:0,mb:5,children:n})})})}},4534:function(e,n,t){"use strict";t.d(n,{L:function(){return o}});var l=t(5893),i=t(4054),a=t(476),r=t(5843),s=t(7690),c=t(1362),u=t(7091);function o(e){let{label:n,value:t,children:o,onChange:d,gridItemProps:x}=e;return(0,l.jsx)(c.z,{xs:12,...x,children:(0,l.jsx)(i.Z,{fullWidth:!0,children:(0,l.jsxs)(s.e,{margin:0,centerX:!1,centerY:!0,spacing:0,children:[(0,l.jsx)(c.z,{xs:6,children:(0,l.jsx)(a.Z,{component:"legend",children:(0,l.jsx)(u.A,{RIf:!!o,Fallback:()=>(0,l.jsx)("span",{children:n}),children:o})})}),(0,l.jsx)(c.z,{xs:6,children:(0,l.jsx)(r.Z,{value:!0,checked:t,onChange:function(e,n){null==d||d(n)},color:"primary"})})]})})})}},6093:function(e,n,t){"use strict";t.d(n,{q:function(){return d}});var l=t(5893),i=t(4351),a=t(7294),r=t(1362),s=t(5993),c=t.n(s),u=t(512);let o=a.forwardRef((e,n)=>(0,l.jsx)("div",{...e,ref:n})),d=e=>{let{children:n,noPadding:t,label:a,className:s,center:d=!0,...x}=e;return(0,l.jsx)(r.z,{className:(0,u.Z)({[c().noPaddings]:t},s),centerText:d,...x,children:(0,l.jsx)(i.Z,{fullWidth:!0,variant:"outlined",label:a,multiline:!0,InputLabelProps:{component:"span",shrink:!0},InputProps:{inputComponent:o},inputProps:{children:n}})})}},4118:function(e,n,t){"use strict";t.d(n,{y:function(){return r}});var l=t(1651),i=t(5911),a=t(7294);function r(e){let{entity:n,link:t}=e,{state:r,updateState:s}=(0,i.C)({});async function c(e){let i={...e,link:t,entity:n},a=await (0,l.Zx)(i);return s({article:a}),a}async function u(e,i){console.log("updateArticle",e);let a={id:i,...e,link:t,entity:n},r=await (0,l.K4)(a);return s({article:r}),r}async function o(e){try{if(s({isArticleSubmitLoading:!0}),r.article){await u(e,r.article.id);return}await c(e)}catch(e){s({hasArticleSubmitError:!0})}finally{s({isArticleSubmitLoading:!1})}}return(0,a.useEffect)(()=>{(async function(){try{s({isArticleLoading:!0});let e=await (0,l.WJ)(n);s({article:e})}finally{s({isArticleLoading:!1})}})()},[]),{saveArticle:c,updateArticle:u,article:r.article,isArticleSubmitLoading:r.isArticleSubmitLoading,isArticleLoading:r.isArticleLoading,handleSubmitArticle:o}}},5911:function(e,n,t){"use strict";t.d(n,{C:function(){return a}});var l=t(7294);function i(e,n){switch(n.type){case"SET_DATA":return{...n.payload};case"UPDATE_DATA":return{...e,...n.payload};case"CLEAR":return{};case"ADD_TO_ARRAY":var t;let l=n.payload.key,i=null===(t=n.payload)||void 0===t?void 0:t.item,a=e[l];return{...e,[l]:[...a,i]};case"DELETE_ITEM_FROM_ARRAY":let r=n.payload.key,s=n.payload.idKey,c=n.payload.idValue,u=e[r].filter(e=>e[s]!==c);return{...e,[r]:u};default:return{...e}}}function a(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[t,a]=(0,l.useReducer)(i,e),[r,s]=(0,l.useState)(!1);function c(e){a({type:"SET_DATA",payload:e})}return(0,l.useEffect)(()=>{async function e(){try{s(!0);let e=n.map(e=>e());await new Promise(e=>setInterval(e,4e3));let t=await Promise.all(e),l=t.reduce((e,n)=>({...e,...n}),{});c(l)}finally{s(!1)}}n&&n.length>0&&e()},[]),{state:t,initialLoading:r,setState:c,updateState:function(e){a({type:"UPDATE_DATA",payload:e})},clearState:function(){a({type:"CLEAR"})},addToArrayInState:function(e,n){a({type:"ADD_TO_ARRAY",payload:{key:e,item:n}})},deleteFromArrayInState:function(e,n,t){a({type:"DELETE_ITEM_FROM_ARRAY",payload:{key:e,idKey:n,idValue:t}})}}}},2056:function(e,n,t){"use strict";function l(e){return e.reduce((e,n)=>{if(n.state){let t=n.subArticles?n.subArticles.filter(e=>e.state):void 0;e.push({...n,subArticles:t})}return e},[])}function i(e){return e.reduce((e,n)=>{var t;return e.push({id:n.id,content:n.content,state:n.state,link:n.link,image:null,imagePreviewUrl:null===(t=n.image)||void 0===t?void 0:t.url,oldFirebaseImage:n.image?{...n.image}:null}),e},[])}t.d(n,{T:function(){return i},a:function(){return l}})},971:function(e){e.exports={dialogAllowOverflow:"SharedModals_dialogAllowOverflow__hl_G4"}},7258:function(e){e.exports={overlay:"SharedImageUpload_overlay__BkReM",dropzone:"SharedImageUpload_dropzone__HCM79",image:"SharedImageUpload_image__lMATb"}},5993:function(e){e.exports={noPaddings:"SharedOutlinedContainer_noPaddings__JrdLE"}}}]);